<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üëë Admin - Carnet Scout</title>
    <link rel="stylesheet" href="styles/main.css">
</head>
<body>
    <!-- Navigation -->
    <div class="fey-container">
        <nav class="fey-nav">
            <button class="fey-tab" onclick="navigateTo('index')">üè† Accueil</button>
            <button class="fey-tab" onclick="navigateTo('liste')">üìã Ma Liste</button>
            <button class="fey-tab" onclick="navigateTo('calendrier')">üìÖ Calendrier</button>
            <button class="fey-tab active">üëë Admin</button>
            <button class="fey-tab" onclick="navigateTo('registre')">üìä Registre</button>
            <button class="fey-tab" onclick="navigateTo('covoiturage')">üöó Covoiturage</button>
        </nav>

        <h1 class="fey-title">üëë Administration</h1>
        <p class="fey-subtitle">G√©rez les sorties, √©quipes et param√®tres</p>

        <!-- Gestion des Sorties -->
        <div class="fey-card">
            <div class="fey-card-header">üéØ Gestion des Sorties</div>
            <div class="admin-section">
                <div class="admin-controls">
                    <button class="fey-btn" onclick="showAddTripModal()">‚ûï Nouvelle Sortie</button>
                    <button class="fey-btn" onclick="refreshTrips()">üîÑ Actualiser</button>
                </div>
                <div class="trips-list" id="calendarTripsList">
                    <!-- Les sorties seront charg√©es ici -->
                </div>
            </div>
        </div>

        <!-- Gestion WhatsApp et Documents -->
        <div class="fey-card">
            <div class="fey-card-header">üí¨ WhatsApp & Documents</div>
            <div class="admin-section">
                <div class="admin-controls">
                    <button class="fey-btn" onclick="showWhatsAppModal()">üì± G√©rer WhatsApp</button>
                    <button class="fey-btn" onclick="showDocumentsModal()">üìÅ G√©rer Documents</button>
                </div>
                <div class="whatsapp-docs-preview" id="whatsappDocsPreview">
                    <!-- Aper√ßu des configurations WhatsApp et documents -->
                </div>
            </div>
        </div>

        <!-- Gestion des Sorties Covoiturage -->
        <div class="fey-card">
            <div class="fey-card-header">üöó Gestion des Sorties Covoiturage</div>
            <div class="admin-section">
                <div class="admin-controls">
                    <button class="fey-btn" onclick="addNewCarpoolTrip()">‚ûï Nouvelle Sortie Covoiturage</button>
                    <button class="fey-btn" onclick="refreshCarpoolTrips()">üîÑ Actualiser</button>
                </div>
                <div class="trips-list" id="carpoolTripsList">
                    <!-- Les sorties covoiturage seront charg√©es ici -->
                </div>
            </div>
        </div>

        <!-- Gestion des √âquipes -->
        <div class="fey-card">
            <div class="fey-card-header">üë• Gestion des √âquipes</div>
            <div class="admin-section">
                <div class="admin-controls">
                    <button class="fey-btn" onclick="showTeamEditor()">‚úèÔ∏è √âditer les √âquipes</button>
                    <button class="fey-btn" onclick="resetTeamsToDefault()">üîÑ R√©initialiser</button>
                    <button class="fey-btn" onclick="exportTeams()">üì§ Exporter</button>
                    <button class="fey-btn" onclick="document.getElementById('importFile').click()">üì• Importer</button>
                    <input type="file" id="importFile" accept=".json" style="display: none;" onchange="importTeams(this.files[0])">
                </div>
                
                <!-- Aper√ßu des √©quipes actuelles -->
                <div class="team-preview" id="teamPreview">
                    <!-- Les √©quipes seront charg√©es ici -->
                </div>
            </div>
        </div>

        <!-- Modal d'√©dition des √©quipes -->
        <div id="teamEditorModal" class="modal" style="display: none;">
            <div class="modal-content">
                <div class="modal-header">
                    <h2>‚úèÔ∏è √âditeur d'√âquipes</h2>
                    <button class="close-btn" onclick="closeTeamEditor()">‚úï</button>
                </div>
                <div class="modal-body">
                    <div class="tabs">
                        <button class="tab-btn active" onclick="switchTeamTab('vie')">üèïÔ∏è √âquipes de Vie</button>
                        <button class="tab-btn" onclick="switchTeamTab('nuit')">üåô √âquipes de Nuit</button>
                    </div>
                    
                    <div id="vieTeamsTab" class="tab-content active">
                        <div class="team-editor-section">
                            <div class="section-header">
                                <h3>üèïÔ∏è √âquipes de Vie</h3>
                                <button class="fey-btn-small" onclick="addLifeTeam()">‚ûï Ajouter</button>
                            </div>
                            <div id="vieTeamsEditor" class="teams-editor">
                                <!-- √âditeurs d'√©quipes de vie -->
                            </div>
                        </div>
                    </div>
                    
                    <div id="nuitTeamsTab" class="tab-content">
                        <div class="team-editor-section">
                            <div class="section-header">
                                <h3>üåô √âquipes de Nuit</h3>
                                <button class="fey-btn-small" onclick="addNightTeam()">‚ûï Ajouter</button>
                            </div>
                            <div id="nuitTeamsEditor" class="teams-editor">
                                <!-- √âditeurs d'√©quipes de nuit -->
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button class="fey-btn" onclick="saveTeamChanges()">üíæ Sauvegarder</button>
                    <button class="fey-btn" onclick="closeTeamEditor()">‚ùå Annuler</button>
                </div>
            </div>
        </div>

        <!-- Modal d'√©dition des sorties -->
        <div id="tripEditorModal" class="modal" style="display: none;">
            <div class="modal-content">
                <div class="modal-header">
                    <h2 id="tripModalTitle">‚ûï Nouvelle Sortie</h2>
                    <button class="close-btn" onclick="closeTripEditor()">‚úï</button>
                </div>
                <div class="modal-body">
                    <form id="tripForm" class="trip-form">
                        <div class="form-grid">
                            <div class="form-group">
                                <label for="tripTitle">üìù Titre de la sortie :</label>
                                <input type="text" id="tripTitle" name="title" class="fey-input" placeholder="Ex: Sortie en for√™t" required>
                            </div>
                            
                            <div class="form-group">
                                <label for="tripDate">üìÖ Date :</label>
                                <input type="date" id="tripDate" name="date" class="fey-input" required>
                            </div>
                            
                            <div class="form-group">
                                <label for="tripStartTime">üïê Heure de d√©but :</label>
                                <input type="time" id="tripStartTime" name="startTime" class="fey-input">
                            </div>
                            
                            <div class="form-group">
                                <label for="tripEndTime">üïï Heure de fin :</label>
                                <input type="time" id="tripEndTime" name="endTime" class="fey-input">
                            </div>
                            
                            <div class="form-group">
                                <label for="tripLocation">üìç Lieu :</label>
                                <input type="text" id="tripLocation" name="location" class="fey-input" placeholder="Ex: For√™t de Compi√®gne">
                            </div>
                            
                            <div class="form-group">
                                <label for="tripAddress">üè† Adresse compl√®te :</label>
                                <textarea id="tripAddress" name="address" class="fey-input" rows="2" placeholder="Adresse compl√®te avec code postal"></textarea>
                            </div>
                            
                            <div class="form-group">
                                <label for="tripContactName">üë§ Contact responsable :</label>
                                <input type="text" id="tripContactName" name="contactName" class="fey-input" placeholder="Nom du responsable">
                            </div>
                            
                            <div class="form-group">
                                <label for="tripContactPhone">üìû T√©l√©phone :</label>
                                <input type="tel" id="tripContactPhone" name="contactPhone" class="fey-input" placeholder="06 12 34 56 78">
                            </div>
                            
                            <div class="form-group">
                                <label for="tripContactEmail">üìß Email :</label>
                                <input type="email" id="tripContactEmail" name="contactEmail" class="fey-input" placeholder="contact@example.com">
                            </div>
                            
                            <div class="form-group full-width">
                                <label for="tripDescription">üìã Description :</label>
                                <textarea id="tripDescription" name="description" class="fey-input" rows="3" placeholder="Description d√©taill√©e de la sortie"></textarea>
                            </div>
                            
                            <div class="form-group">
                                <label for="tripCarpool">üöó Covoiturage :</label>
                                <label class="checkbox-label">
                                    <input type="checkbox" id="tripCarpool" name="carpool">
                                    <span>Activer le covoiturage pour cette sortie</span>
                                </label>
                            </div>
                            
                            <div class="form-group">
                                <label for="tripWhatsAppGroup">üí¨ Groupe WhatsApp :</label>
                                <input type="url" id="tripWhatsAppGroup" name="whatsappGroup" class="fey-input" placeholder="Lien du groupe WhatsApp (optionnel)">
                            </div>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button class="fey-btn" onclick="saveTrip()">üíæ Sauvegarder</button>
                    <button class="fey-btn" onclick="closeTripEditor()">‚ùå Annuler</button>
                </div>
            </div>
        </div>

        <!-- Modal de gestion WhatsApp -->
        <div id="whatsappModal" class="modal" style="display: none;">
            <div class="modal-content">
                <div class="modal-header">
                    <h2>üí¨ Gestion WhatsApp</h2>
                    <button class="close-btn" onclick="closeWhatsAppModal()">‚úï</button>
                </div>
                <div class="modal-body">
                    <div class="form-group">
                        <label for="whatsappParentsLink">üë®‚Äçüë©‚Äçüëß‚Äçüë¶ Lien groupe WhatsApp Parents :</label>
                        <input type="url" id="whatsappParentsLink" class="fey-input" placeholder="https://chat.whatsapp.com/...">
                    </div>
                    <div class="form-group">
                        <label for="whatsappScoutsLink">üë¶üëß Lien groupe WhatsApp Scouts :</label>
                        <input type="url" id="whatsappScoutsLink" class="fey-input" placeholder="https://chat.whatsapp.com/...">
                    </div>
                    <div class="form-group">
                        <label for="whatsappQRImage">üì± Image QR Code (URL) :</label>
                        <input type="url" id="whatsappQRImage" class="fey-input" placeholder="URL de l'image QR code">
                    </div>
                    <div class="form-group">
                        <label for="whatsappDescription">üìù Description :</label>
                        <textarea id="whatsappDescription" class="fey-input" rows="2" placeholder="Description du groupe WhatsApp"></textarea>
                    </div>
                </div>
                <div class="modal-footer">
                    <button class="fey-btn" onclick="saveWhatsAppSettings()">üíæ Sauvegarder</button>
                    <button class="fey-btn" onclick="closeWhatsAppModal()">‚ùå Annuler</button>
                </div>
            </div>
        </div>

        <!-- Modal de gestion Documents -->
        <div id="documentsModal" class="modal" style="display: none;">
            <div class="modal-content">
                <div class="modal-header">
                    <h2>üìÅ Gestion des Documents</h2>
                    <button class="close-btn" onclick="closeDocumentsModal()">‚úï</button>
                </div>
                <div class="modal-body">
                    <div class="form-group">
                        <label for="documentsDriveLink">üìö Lien Google Drive :</label>
                        <input type="url" id="documentsDriveLink" class="fey-input" placeholder="https://drive.google.com/...">
                    </div>
                    <div class="form-group">
                        <label for="documentsDescription">üìù Description :</label>
                        <textarea id="documentsDescription" class="fey-input" rows="3" placeholder="Description des documents disponibles"></textarea>
                    </div>
                    <div class="form-group">
                        <label for="documentsInstructions">üìã Instructions :</label>
                        <textarea id="documentsInstructions" class="fey-input" rows="3" placeholder="Instructions pour acc√©der aux documents"></textarea>
                    </div>
                </div>
                <div class="modal-footer">
                    <button class="fey-btn" onclick="saveDocumentsSettings()">üíæ Sauvegarder</button>
                    <button class="fey-btn" onclick="closeDocumentsModal()">‚ùå Annuler</button>
                </div>
            </div>
        </div>

        <!-- Modal de gestion Calendrier -->
        <div id="calendarModal" class="modal" style="display: none;">
            <div class="modal-content">
                <div class="modal-header">
                    <h2>üìÖ Configuration du Calendrier</h2>
                    <button class="close-btn" onclick="closeCalendarModal()">‚úï</button>
                </div>
                <div class="modal-body">
                    <div class="form-group">
                        <label for="calendarEmbedUrl">üìÖ URL d'int√©gration Google Calendar :</label>
                        <input type="url" id="calendarEmbedUrl" class="fey-input" placeholder="https://calendar.google.com/calendar/embed?src=...">
                        <small style="color: #666; font-size: 0.8rem;">
                            Pour obtenir cette URL : Google Calendar ‚Üí Param√®tres ‚Üí Int√©grer le calendrier
                        </small>
                    </div>
                    <div class="form-group">
                        <label for="calendarTitle">üìù Titre du calendrier :</label>
                        <input type="text" id="calendarTitle" class="fey-input" placeholder="Calendrier des √âv√©nements Scouts">
                    </div>
                    <div class="form-group">
                        <label for="calendarDescription">üìã Description :</label>
                        <textarea id="calendarDescription" class="fey-input" rows="2" placeholder="Description du calendrier"></textarea>
                    </div>
                    <div class="form-group">
                        <label for="calendarHeight">üìè Hauteur du calendrier (px) :</label>
                        <input type="number" id="calendarHeight" class="fey-input" value="400" min="200" max="800">
                    </div>
                    <div class="form-group">
                        <label class="checkbox-label">
                            <input type="checkbox" id="calendarAutoSync">
                            <span>üîÑ Synchronisation automatique avec les sorties</span>
                        </label>
                    </div>
                </div>
                <div class="modal-footer">
                    <button class="fey-btn" onclick="saveCalendarSettings()">üíæ Sauvegarder</button>
                    <button class="fey-btn" onclick="closeCalendarModal()">‚ùå Annuler</button>
                </div>
            </div>
        </div>

        <!-- Gestion du Calendrier -->
        <div class="fey-card">
            <div class="fey-card-header">üìÖ Gestion du Calendrier</div>
            <div class="admin-section">
                <div class="admin-controls">
                    <button class="fey-btn" onclick="showCalendarModal()">‚öôÔ∏è Configurer le Calendrier</button>
                    <button class="fey-btn" onclick="syncCalendar()">üîÑ Synchroniser</button>
                </div>
                <div class="calendar-preview" id="calendarPreview">
                    <!-- Aper√ßu de la configuration du calendrier -->
                </div>
            </div>
        </div>

        <!-- Param√®tres -->
        <div class="fey-card">
            <div class="fey-card-header">‚öôÔ∏è Param√®tres</div>
            <div class="admin-section">
                <div class="settings-grid">
                    <div class="setting-item">
                        <label class="setting-label">Nom du groupe :</label>
                        <input type="text" id="groupName" class="fey-input" placeholder="Nom du groupe scout">
                    </div>
                    <div class="setting-item">
                        <label class="setting-label">Responsable :</label>
                        <input type="text" id="leaderName" class="fey-input" placeholder="Nom du responsable">
                    </div>
                    <div class="setting-item">
                        <label class="setting-label">T√©l√©phone :</label>
                        <input type="tel" id="leaderPhone" class="fey-input" placeholder="Num√©ro de t√©l√©phone">
                    </div>
                </div>
                <div class="admin-controls">
                    <button class="fey-btn" onclick="saveSettings()">üíæ Sauvegarder</button>
                    <button class="fey-btn" onclick="resetSettings()">üîÑ R√©initialiser</button>
                </div>
            </div>
        </div>
    </div>

    <script src="js/common.js"></script>
    <script src="js/equipes.js"></script>
    <script>
        // Navigation
        function navigateTo(page) {
            if (page === 'index') {
                window.location.href = 'index.html';
            } else {
                window.location.href = page + '.html';
            }
        }

        // Donn√©es des sorties
        const defaultTrips = [
            {
                id: 1,
                title: "Sortie en for√™t",
                date: "2024-12-15",
                description: "Randonn√©e et observation de la nature",
                location: "For√™t de Compi√®gne",
                carpool: false
            },
            {
                id: 2,
                title: "R√©union d'√©quipe",
                date: "2024-12-20",
                description: "Pr√©paration du camp d'hiver",
                location: "Local scout",
                carpool: false
            },
            {
                id: 3,
                title: "Camp d'hiver",
                date: "2024-12-28",
                description: "Camp de 3 jours en montagne",
                location: "Alpes",
                carpool: true
            }
        ];

        // Charger les sorties depuis localStorage
        function loadTrips() {
            const saved = localStorage.getItem('admin-outings');
            if (saved) {
                return JSON.parse(saved);
            }
            return defaultTrips;
        }

        // Sauvegarder les sorties
        function saveTrips(trips) {
            localStorage.setItem('admin-outings', JSON.stringify(trips));
        }

        // Charger les sorties covoiturage
        function loadCarpoolTrips() {
            const saved = localStorage.getItem('carpool-trips');
            return saved ? JSON.parse(saved) : [];
        }

        // Sauvegarder les sorties covoiturage
        function saveCarpoolTrips(trips) {
            localStorage.setItem('carpool-trips', JSON.stringify(trips));
        }

        // Afficher les sorties
        function displayTrips() {
            const trips = loadTrips();
            const container = document.getElementById('calendarTripsList');
            
            if (trips.length === 0) {
                container.innerHTML = '<div class="fey-note">Aucune sortie enregistr√©e.</div>';
                return;
            }

            const html = trips.map(trip => {
                const dateStr = trip.date ? new Date(trip.date).toLocaleDateString('fr-FR') : 'Date non d√©finie';
                const timeStr = trip.startTime && trip.endTime ? `${trip.startTime} - ${trip.endTime}` : 
                              trip.startTime ? `√Ä partir de ${trip.startTime}` : '';
                const contactStr = trip.contactName && trip.contactPhone ? `${trip.contactName} (${trip.contactPhone})` : 
                                 trip.contactName || trip.contactPhone || '';
                
                return `
                    <div class="trip-item">
                        <div class="trip-info">
                            <div class="trip-title">${trip.title}</div>
                            <div class="trip-date">üìÖ ${dateStr} ${timeStr ? '‚Ä¢ ' + timeStr : ''}</div>
                            <div class="trip-location">üìç ${trip.location || 'Lieu non d√©fini'}</div>
                            ${trip.address ? `<div class="trip-address">üè† ${trip.address}</div>` : ''}
                            ${contactStr ? `<div class="trip-contact">üë§ ${contactStr}</div>` : ''}
                            ${trip.description ? `<div class="trip-description">${trip.description}</div>` : ''}
                            ${trip.whatsappGroup ? `<div class="trip-whatsapp">üí¨ <a href="${trip.whatsappGroup}" target="_blank">Groupe WhatsApp</a></div>` : ''}
                        </div>
                        <div class="trip-actions">
                            <label class="carpool-toggle">
                                <input type="checkbox" ${trip.carpool ? 'checked' : ''} 
                                       onchange="toggleCarpool(${trip.id})">
                                <span>üöó Covoiturage</span>
                            </label>
                            <button class="fey-btn-small" onclick="editTrip(${trip.id})">‚úèÔ∏è</button>
                            <button class="fey-btn-small danger" onclick="deleteTrip(${trip.id})">üóëÔ∏è</button>
                        </div>
                    </div>
                `;
            }).join('');

            container.innerHTML = html;
        }

        // Afficher les sorties covoiturage
        function displayCarpoolTrips() {
            const trips = loadCarpoolTrips();
            const container = document.getElementById('carpoolTripsList');
            
            if (trips.length === 0) {
                container.innerHTML = '<div class="fey-note">Aucune sortie covoiturage enregistr√©e.</div>';
                return;
            }

            const html = trips.map(trip => `
                <div class="trip-item">
                    <div class="trip-info">
                        <div class="trip-title">${trip.title}</div>
                        <div class="trip-date">üìÖ ${new Date(trip.date).toLocaleDateString('fr-FR')}</div>
                        <div class="trip-location">üìç ${trip.location}</div>
                        <div class="trip-description">${trip.description}</div>
                    </div>
                    <div class="trip-actions">
                        <button class="fey-btn-small" onclick="editCarpoolTrip(${trip.id})">‚úèÔ∏è</button>
                        <button class="fey-btn-small danger" onclick="deleteCarpoolTrip(${trip.id})">üóëÔ∏è</button>
                    </div>
                </div>
            `).join('');

            container.innerHTML = html;
        }

        // Basculer le covoiturage
        function toggleCarpool(tripId) {
            const trips = loadTrips();
            const trip = trips.find(t => t.id === tripId);
            if (trip) {
                trip.carpool = !trip.carpool;
                saveTrips(trips);
                
                if (trip.carpool) {
                    // Ajouter √† la liste covoiturage
                    const carpoolTrips = loadCarpoolTrips();
                    carpoolTrips.push(trip);
                    saveCarpoolTrips(carpoolTrips);
                } else {
                    // Retirer de la liste covoiturage
                    const carpoolTrips = loadCarpoolTrips();
                    const filtered = carpoolTrips.filter(t => t.id !== tripId);
                    saveCarpoolTrips(filtered);
                }
                
                displayTrips();
                displayCarpoolTrips();
            }
        }

        // Variables globales pour l'√©dition
        let editingTripId = null;

        // Afficher le modal d'ajout de sortie
        function showAddTripModal() {
            editingTripId = null;
            document.getElementById('tripModalTitle').textContent = '‚ûï Nouvelle Sortie';
            document.getElementById('tripForm').reset();
            document.getElementById('tripEditorModal').style.display = 'flex';
        }

        // Fermer le modal d'√©dition de sortie
        function closeTripEditor() {
            document.getElementById('tripEditorModal').style.display = 'none';
            editingTripId = null;
        }

        // √âditer une sortie existante
        function editTrip(tripId) {
            const trips = loadTrips();
            const trip = trips.find(t => t.id === tripId);
            if (!trip) return;

            editingTripId = tripId;
            document.getElementById('tripModalTitle').textContent = '‚úèÔ∏è Modifier la Sortie';
            
            // Remplir le formulaire
            document.getElementById('tripTitle').value = trip.title || '';
            document.getElementById('tripDate').value = trip.date || '';
            document.getElementById('tripStartTime').value = trip.startTime || '';
            document.getElementById('tripEndTime').value = trip.endTime || '';
            document.getElementById('tripLocation').value = trip.location || '';
            document.getElementById('tripAddress').value = trip.address || '';
            document.getElementById('tripContactName').value = trip.contactName || '';
            document.getElementById('tripContactPhone').value = trip.contactPhone || '';
            document.getElementById('tripContactEmail').value = trip.contactEmail || '';
            document.getElementById('tripDescription').value = trip.description || '';
            document.getElementById('tripCarpool').checked = trip.carpool || false;
            document.getElementById('tripWhatsAppGroup').value = trip.whatsappGroup || '';
            
            document.getElementById('tripEditorModal').style.display = 'flex';
        }

        // Sauvegarder une sortie
        function saveTrip() {
            const form = document.getElementById('tripForm');
            const formData = new FormData(form);
            
            const tripData = {
                title: formData.get('title'),
                date: formData.get('date'),
                startTime: formData.get('startTime'),
                endTime: formData.get('endTime'),
                location: formData.get('location'),
                address: formData.get('address'),
                contactName: formData.get('contactName'),
                contactPhone: formData.get('contactPhone'),
                contactEmail: formData.get('contactEmail'),
                description: formData.get('description'),
                carpool: formData.get('carpool') === 'on',
                whatsappGroup: formData.get('whatsappGroup')
            };

            if (!tripData.title || !tripData.date) {
                alert('Le titre et la date sont obligatoires !');
                return;
            }

            const trips = loadTrips();
            
            if (editingTripId) {
                // Modification
                const tripIndex = trips.findIndex(t => t.id === editingTripId);
                if (tripIndex !== -1) {
                    trips[tripIndex] = { ...trips[tripIndex], ...tripData };
                }
            } else {
                // Nouvelle sortie
                const newTrip = {
                    id: Date.now(),
                    ...tripData
                };
                trips.push(newTrip);
            }
            
            saveTrips(trips);
            displayTrips();
            closeTripEditor();
        }

        // Supprimer une sortie
        function deleteTrip(tripId) {
            if (confirm('√ätes-vous s√ªr de vouloir supprimer cette sortie ?')) {
                const trips = loadTrips();
                const filtered = trips.filter(t => t.id !== tripId);
                saveTrips(filtered);
                displayTrips();
            }
        }

        // Ajouter une nouvelle sortie covoiturage
        function addNewCarpoolTrip() {
            const title = prompt('Titre de la sortie :');
            if (!title) return;
            
            const date = prompt('Date (YYYY-MM-DD) :');
            if (!date) return;
            
            const location = prompt('Lieu :');
            const description = prompt('Description :');
            
            const trips = loadCarpoolTrips();
            const newTrip = {
                id: Date.now(),
                title,
                date,
                location: location || '',
                description: description || '',
                carpool: true
            };
            
            trips.push(newTrip);
            saveCarpoolTrips(trips);
            displayCarpoolTrips();
        }

        // Actualiser les sorties
        function refreshTrips() {
            displayTrips();
        }

        // Actualiser les sorties covoiturage
        function refreshCarpoolTrips() {
            displayCarpoolTrips();
        }

        // Charger les param√®tres
        function loadSettings() {
            const settings = JSON.parse(localStorage.getItem('admin-settings') || '{}');
            document.getElementById('groupName').value = settings.groupName || '';
            document.getElementById('leaderName').value = settings.leaderName || '';
            document.getElementById('leaderPhone').value = settings.leaderPhone || '';
        }

        // Sauvegarder les param√®tres
        function saveSettings() {
            const settings = {
                groupName: document.getElementById('groupName').value,
                leaderName: document.getElementById('leaderName').value,
                leaderPhone: document.getElementById('leaderPhone').value
            };
            localStorage.setItem('admin-settings', JSON.stringify(settings));
            alert('Param√®tres sauvegard√©s !');
        }

        // R√©initialiser les param√®tres
        function resetSettings() {
            if (confirm('√ätes-vous s√ªr de vouloir r√©initialiser tous les param√®tres ?')) {
                localStorage.removeItem('admin-settings');
                loadSettings();
            }
        }

        // === GESTION DES √âQUIPES ===
        
        // Afficher l'aper√ßu des √©quipes
        function displayTeamsPreview() {
            const container = document.getElementById('teamPreview');
            const vieTeams = getLifeTeams();
            const nuitTeams = getNightTeams();
            
            let html = '<div class="teams-preview-grid">';
            
            // √âquipes de vie
            html += '<div class="preview-section">';
            html += '<h4>üèïÔ∏è √âquipes de Vie</h4>';
            html += '<div class="preview-teams">';
            Object.values(vieTeams).forEach(team => {
                html += `<div class="preview-team" style="background: ${team.color}; color: white; padding: 0.5rem; border-radius: 8px; margin-bottom: 0.5rem;">
                    <strong>${team.name}</strong><br>
                    <small>${team.members.length} membres: ${team.members.join(', ')}</small>
                </div>`;
            });
            html += '</div></div>';
            
            // √âquipes de nuit
            html += '<div class="preview-section">';
            html += '<h4>üåô √âquipes de Nuit</h4>';
            html += '<div class="preview-teams">';
            Object.values(nuitTeams).forEach(team => {
                html += `<div class="preview-team" style="background: ${team.color}; color: white; padding: 0.5rem; border-radius: 8px; margin-bottom: 0.5rem;">
                    <strong>${team.name}</strong><br>
                    <small>${team.members.length} membres: ${team.members.join(', ')}</small>
                </div>`;
            });
            html += '</div></div>';
            
            html += '</div>';
            container.innerHTML = html;
        }
        
        // Ouvrir l'√©diteur d'√©quipes
        function showTeamEditor() {
            document.getElementById('teamEditorModal').style.display = 'flex';
            loadTeamsEditor();
        }
        
        // Fermer l'√©diteur d'√©quipes
        function closeTeamEditor() {
            document.getElementById('teamEditorModal').style.display = 'none';
        }
        
        // Basculer entre les onglets d'√©quipes
        function switchTeamTab(tabType) {
            // D√©sactiver tous les onglets
            document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active'));
            document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));
            
            // Activer l'onglet s√©lectionn√©
            event.target.classList.add('active');
            document.getElementById(tabType + 'TeamsTab').classList.add('active');
        }
        
        // Charger l'√©diteur d'√©quipes
        function loadTeamsEditor() {
            loadVieTeamsEditor();
            loadNuitTeamsEditor();
        }
        
        // Charger l'√©diteur des √©quipes de vie
        function loadVieTeamsEditor() {
            const container = document.getElementById('vieTeamsEditor');
            const vieTeams = getLifeTeams();
            
            let html = '';
            Object.entries(vieTeams).forEach(([teamId, team]) => {
                html += createTeamEditor(teamId, team, 'vie');
            });
            container.innerHTML = html;
        }
        
        // Charger l'√©diteur des √©quipes de nuit
        function loadNuitTeamsEditor() {
            const container = document.getElementById('nuitTeamsEditor');
            const nuitTeams = getNightTeams();
            
            let html = '';
            Object.entries(nuitTeams).forEach(([teamId, team]) => {
                html += createTeamEditor(teamId, team, 'nuit');
            });
            container.innerHTML = html;
        }
        
        // Cr√©er un √©diteur d'√©quipe
        function createTeamEditor(teamId, team, type) {
            return `
                <div class="team-editor-item">
                    <div class="team-editor-header">
                        <input type="text" value="${team.name}" onchange="updateTeamName('${teamId}', '${type}', this.value)" class="team-name-input">
                        <input type="color" value="#${team.color.match(/rgb\((\d+), (\d+), (\d+)\)/)?.[1]?.toString(16) || 'ff6b35'}" onchange="updateTeamColor('${teamId}', '${type}', this.value)" class="team-color-input">
                        <button class="fey-btn-small danger" onclick="deleteTeam('${teamId}', '${type}')">üóëÔ∏è</button>
                    </div>
                    <div class="team-members-editor">
                        <label>Membres (un par ligne):</label>
                        <textarea rows="6" onchange="updateTeamMembers('${teamId}', '${type}', this.value)">${team.members.join('\n')}</textarea>
                    </div>
                </div>
            `;
        }
        
        // Mettre √† jour le nom d'une √©quipe
        function updateTeamName(teamId, type, newName) {
            const teams = loadTeams();
            if (teams[type] && teams[type][teamId]) {
                teams[type][teamId].name = newName;
                saveTeams(teams);
            }
        }
        
        // Mettre √† jour la couleur d'une √©quipe
        function updateTeamColor(teamId, type, newColor) {
            const teams = loadTeams();
            if (teams[type] && teams[type][teamId]) {
                const rgb = hexToRgb(newColor);
                teams[type][teamId].color = `linear-gradient(135deg, rgb(${rgb.r}, ${rgb.g}, ${rgb.b}), rgb(${Math.max(0, rgb.r-30)}, ${Math.max(0, rgb.g-30)}, ${Math.max(0, rgb.b-30)}))`;
                saveTeams(teams);
            }
        }
        
        // Mettre √† jour les membres d'une √©quipe
        function updateTeamMembers(teamId, type, membersText) {
            const teams = loadTeams();
            if (teams[type] && teams[type][teamId]) {
                const members = membersText.split('\n').filter(m => m.trim() !== '');
                teams[type][teamId].members = members;
                saveTeams(teams);
            }
        }
        
        // Supprimer une √©quipe
        function deleteTeam(teamId, type) {
            if (confirm('√ätes-vous s√ªr de vouloir supprimer cette √©quipe ?')) {
                if (type === 'vie') {
                    deleteLifeTeam(teamId);
                } else {
                    deleteNightTeam(teamId);
                }
                loadTeamsEditor();
                displayTeamsPreview();
            }
        }
        
        // Ajouter une nouvelle √©quipe de vie
        function addLifeTeam() {
            const name = prompt('Nom de la nouvelle √©quipe de vie :');
            if (name) {
                const teamId = createLifeTeam(name, 'linear-gradient(135deg, #ff6b35, #f7931e)', []);
                loadVieTeamsEditor();
                displayTeamsPreview();
            }
        }
        
        // Ajouter une nouvelle √©quipe de nuit
        function addNightTeam() {
            const name = prompt('Nom de la nouvelle √©quipe de nuit :');
            if (name) {
                const teamId = createNightTeam(name, 'linear-gradient(135deg, #2d3436, #636e72)', []);
                loadNuitTeamsEditor();
                displayTeamsPreview();
            }
        }
        
        // Sauvegarder les changements d'√©quipes
        function saveTeamChanges() {
            alert('√âquipes sauvegard√©es !');
            displayTeamsPreview();
            closeTeamEditor();
        }
        
        // Convertir hex en RGB
        function hexToRgb(hex) {
            const result = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(hex);
            return result ? {
                r: parseInt(result[1], 16),
                g: parseInt(result[2], 16),
                b: parseInt(result[3], 16)
            } : null;
        }

        // === GESTION WHATSAPP ET DOCUMENTS ===
        
        // Charger les param√®tres WhatsApp
        function loadWhatsAppSettings() {
            const settings = JSON.parse(localStorage.getItem('whatsapp-settings') || '{}');
            document.getElementById('whatsappParentsLink').value = settings.parentsLink || '';
            document.getElementById('whatsappScoutsLink').value = settings.scoutsLink || '';
            document.getElementById('whatsappQRImage').value = settings.qrImage || '';
            document.getElementById('whatsappDescription').value = settings.description || '';
        }

        // Sauvegarder les param√®tres WhatsApp
        function saveWhatsAppSettings() {
            const settings = {
                parentsLink: document.getElementById('whatsappParentsLink').value,
                scoutsLink: document.getElementById('whatsappScoutsLink').value,
                qrImage: document.getElementById('whatsappQRImage').value,
                description: document.getElementById('whatsappDescription').value
            };
            localStorage.setItem('whatsapp-settings', JSON.stringify(settings));
            alert('Param√®tres WhatsApp sauvegard√©s !');
            closeWhatsAppModal();
            displayWhatsAppDocsPreview();
        }

        // Charger les param√®tres Documents
        function loadDocumentsSettings() {
            const settings = JSON.parse(localStorage.getItem('documents-settings') || '{}');
            document.getElementById('documentsDriveLink').value = settings.driveLink || '';
            document.getElementById('documentsDescription').value = settings.description || '';
            document.getElementById('documentsInstructions').value = settings.instructions || '';
        }

        // Sauvegarder les param√®tres Documents
        function saveDocumentsSettings() {
            const settings = {
                driveLink: document.getElementById('documentsDriveLink').value,
                description: document.getElementById('documentsDescription').value,
                instructions: document.getElementById('documentsInstructions').value
            };
            localStorage.setItem('documents-settings', JSON.stringify(settings));
            alert('Param√®tres Documents sauvegard√©s !');
            closeDocumentsModal();
            displayWhatsAppDocsPreview();
        }

        // Afficher le modal WhatsApp
        function showWhatsAppModal() {
            loadWhatsAppSettings();
            document.getElementById('whatsappModal').style.display = 'flex';
        }

        // Fermer le modal WhatsApp
        function closeWhatsAppModal() {
            document.getElementById('whatsappModal').style.display = 'none';
        }

        // Afficher le modal Documents
        function showDocumentsModal() {
            loadDocumentsSettings();
            document.getElementById('documentsModal').style.display = 'flex';
        }

        // Fermer le modal Documents
        function closeDocumentsModal() {
            document.getElementById('documentsModal').style.display = 'none';
        }

        // Afficher l'aper√ßu WhatsApp et Documents
        function displayWhatsAppDocsPreview() {
            const container = document.getElementById('whatsappDocsPreview');
            const whatsappSettings = JSON.parse(localStorage.getItem('whatsapp-settings') || '{}');
            const documentsSettings = JSON.parse(localStorage.getItem('documents-settings') || '{}');
            
            let html = '<div class="preview-grid">';
            
            // Aper√ßu WhatsApp
            html += '<div class="preview-section">';
            html += '<h4>üí¨ WhatsApp</h4>';
            if (whatsappSettings.parentsLink || whatsappSettings.scoutsLink) {
                html += '<div class="preview-item">';
                if (whatsappSettings.parentsLink) {
                    html += `<p><strong>Parents:</strong> <a href="${whatsappSettings.parentsLink}" target="_blank">Lien configur√©</a></p>`;
                }
                if (whatsappSettings.scoutsLink) {
                    html += `<p><strong>Scouts:</strong> <a href="${whatsappSettings.scoutsLink}" target="_blank">Lien configur√©</a></p>`;
                }
                if (whatsappSettings.description) {
                    html += `<p><strong>Description:</strong> ${whatsappSettings.description}</p>`;
                }
                html += '</div>';
            } else {
                html += '<p class="preview-empty">Aucun param√®tre WhatsApp configur√©</p>';
            }
            html += '</div>';
            
            // Aper√ßu Documents
            html += '<div class="preview-section">';
            html += '<h4>üìÅ Documents</h4>';
            if (documentsSettings.driveLink) {
                html += '<div class="preview-item">';
                html += `<p><strong>Drive:</strong> <a href="${documentsSettings.driveLink}" target="_blank">Lien configur√©</a></p>`;
                if (documentsSettings.description) {
                    html += `<p><strong>Description:</strong> ${documentsSettings.description}</p>`;
                }
                html += '</div>';
            } else {
                html += '<p class="preview-empty">Aucun param√®tre de documents configur√©</p>';
            }
            html += '</div>';
            
            html += '</div>';
            container.innerHTML = html;
        }

        // === GESTION DU CALENDRIER ===
        
        // Charger les param√®tres du calendrier
        function loadCalendarSettings() {
            const settings = JSON.parse(localStorage.getItem('calendar-settings') || '{}');
            document.getElementById('calendarEmbedUrl').value = settings.embedUrl || '';
            document.getElementById('calendarTitle').value = settings.title || '';
            document.getElementById('calendarDescription').value = settings.description || '';
            document.getElementById('calendarHeight').value = settings.height || 400;
            document.getElementById('calendarAutoSync').checked = settings.autoSync || false;
        }

        // Sauvegarder les param√®tres du calendrier
        function saveCalendarSettings() {
            const settings = {
                embedUrl: document.getElementById('calendarEmbedUrl').value,
                title: document.getElementById('calendarTitle').value,
                description: document.getElementById('calendarDescription').value,
                height: parseInt(document.getElementById('calendarHeight').value),
                autoSync: document.getElementById('calendarAutoSync').checked
            };
            localStorage.setItem('calendar-settings', JSON.stringify(settings));
            alert('Param√®tres du calendrier sauvegard√©s !');
            closeCalendarModal();
            displayCalendarPreview();
        }

        // Afficher le modal du calendrier
        function showCalendarModal() {
            loadCalendarSettings();
            document.getElementById('calendarModal').style.display = 'flex';
        }

        // Fermer le modal du calendrier
        function closeCalendarModal() {
            document.getElementById('calendarModal').style.display = 'none';
        }

        // Afficher l'aper√ßu du calendrier
        function displayCalendarPreview() {
            const container = document.getElementById('calendarPreview');
            const calendarSettings = JSON.parse(localStorage.getItem('calendar-settings') || '{}');
            
            if (calendarSettings.embedUrl) {
                let html = '<div class="preview-item">';
                html += `<p><strong>Titre:</strong> ${calendarSettings.title || 'Calendrier des √âv√©nements Scouts'}</p>`;
                if (calendarSettings.description) {
                    html += `<p><strong>Description:</strong> ${calendarSettings.description}</p>`;
                }
                html += `<p><strong>Hauteur:</strong> ${calendarSettings.height || 400}px</p>`;
                html += `<p><strong>Synchronisation auto:</strong> ${calendarSettings.autoSync ? 'Activ√©e' : 'D√©sactiv√©e'}</p>`;
                html += `<p><strong>URL:</strong> <a href="${calendarSettings.embedUrl}" target="_blank">Lien configur√©</a></p>`;
                html += '</div>';
                container.innerHTML = html;
            } else {
                container.innerHTML = '<p class="preview-empty">Aucune configuration de calendrier</p>';
            }
        }

        // Synchroniser le calendrier avec les sorties
        function syncCalendar() {
            const trips = loadTrips();
            const calendarSettings = JSON.parse(localStorage.getItem('calendar-settings') || '{}');
            
            if (!calendarSettings.embedUrl) {
                alert('Veuillez d\'abord configurer l\'URL du calendrier !');
                return;
            }

            // Ici on pourrait impl√©menter une synchronisation avec Google Calendar API
            // Pour l'instant, on affiche juste un message de confirmation
            alert(`Synchronisation effectu√©e avec ${trips.length} sorties !`);
        }

        // Initialisation
        function init() {
            displayTrips();
            displayCarpoolTrips();
            loadSettings();
            displayTeamsPreview();
            displayWhatsAppDocsPreview();
            displayCalendarPreview();
        }

        // D√©marrer
        window.addEventListener('load', init);
    </script>

    <style>
        .admin-section {
            margin: 1rem 0;
        }

        .admin-controls {
            display: flex;
            gap: 0.5rem;
            margin-bottom: 1rem;
            flex-wrap: wrap;
        }

        .trips-list {
            display: grid;
            gap: 1rem;
        }

        .trip-item {
            background: white;
            border-radius: var(--r-sm);
            padding: 1rem;
            border: 2px solid var(--c-ink-900);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .trip-info {
            flex: 1;
        }

        .trip-title {
            font-size: 1.2rem;
            font-weight: bold;
            color: var(--c-ink-900);
            margin-bottom: 0.5rem;
        }

        .trip-date, .trip-location {
            color: #666;
            font-size: 0.9rem;
            margin-bottom: 0.25rem;
        }

        .trip-description {
            color: var(--c-ink-900);
            font-size: 0.9rem;
        }

        .trip-actions {
            display: flex;
            gap: 0.5rem;
            align-items: center;
        }

        .carpool-toggle {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            cursor: pointer;
        }

        .carpool-toggle input {
            transform: scale(1.2);
        }

        .fey-btn-small {
            padding: 0.5rem;
            font-size: 0.9rem;
            border-radius: var(--r-sm);
            border: 2px solid var(--c-ink-900);
            background: white;
            color: var(--c-ink-900);
            cursor: pointer;
            transition: all 0.2s;
        }

        .fey-btn-small:hover {
            background: var(--c-ink-900);
            color: white;
        }

        .fey-btn-small.danger {
            border-color: #f44336;
            color: #f44336;
        }

        .fey-btn-small.danger:hover {
            background: #f44336;
            color: white;
        }

        .settings-grid {
            display: grid;
            gap: 1rem;
            margin-bottom: 1rem;
        }

        .setting-item {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .setting-label {
            font-weight: bold;
            color: var(--c-ink-900);
        }

        .fey-input {
            padding: 0.75rem;
            border: 2px solid var(--c-ink-900);
            border-radius: var(--r-sm);
            font-size: 1rem;
        }

        .fey-input:focus {
            outline: none;
            border-color: #4CAF50;
        }

        /* Styles pour les formulaires */
        .trip-form {
            max-width: 100%;
        }

        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1.5rem;
            margin-bottom: 1rem;
        }

        .form-group {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .form-group.full-width {
            grid-column: 1 / -1;
        }

        .form-group label {
            font-weight: bold;
            color: var(--c-ink-900);
            font-size: 0.9rem;
        }

        .checkbox-label {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            cursor: pointer;
            font-weight: normal !important;
        }

        .checkbox-label input[type="checkbox"] {
            transform: scale(1.2);
        }

        /* Styles pour les aper√ßus */
        .whatsapp-docs-preview {
            margin-top: 1rem;
        }

        .preview-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2rem;
        }

        .preview-section h4 {
            margin-bottom: 1rem;
            color: var(--c-ink-900);
            border-bottom: 2px solid var(--c-ink-900);
            padding-bottom: 0.5rem;
        }

        .preview-item {
            background: white;
            border: 2px solid var(--c-ink-900);
            border-radius: var(--r-sm);
            padding: 1rem;
            margin-bottom: 0.5rem;
        }

        .preview-item p {
            margin: 0.25rem 0;
            font-size: 0.9rem;
        }

        .preview-item a {
            color: #2196F3;
            text-decoration: none;
        }

        .preview-item a:hover {
            text-decoration: underline;
        }

        .preview-empty {
            color: #666;
            font-style: italic;
            text-align: center;
            padding: 1rem;
            background: #f5f5f5;
            border-radius: var(--r-sm);
            border: 2px dashed #ccc;
        }

        /* Styles pour les informations de sortie √©tendues */
        .trip-address, .trip-contact, .trip-whatsapp {
            color: #666;
            font-size: 0.85rem;
            margin-bottom: 0.25rem;
        }

        .trip-whatsapp a {
            color: #25D366;
            text-decoration: none;
        }

        .trip-whatsapp a:hover {
            text-decoration: underline;
        }

        /* Styles pour l'aper√ßu du calendrier */
        .calendar-preview {
            margin-top: 1rem;
        }

        .calendar-preview .preview-item {
            background: white;
            border: 2px solid var(--c-ink-900);
            border-radius: var(--r-sm);
            padding: 1rem;
        }

        .calendar-preview .preview-item p {
            margin: 0.25rem 0;
            font-size: 0.9rem;
        }

        .calendar-preview .preview-item a {
            color: #2196F3;
            text-decoration: none;
        }

        .calendar-preview .preview-item a:hover {
            text-decoration: underline;
        }

        /* Styles pour la gestion des √©quipes */
        .teams-preview-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2rem;
            margin-top: 1rem;
        }

        .preview-section h4 {
            margin-bottom: 1rem;
            color: var(--c-ink-900);
            border-bottom: 2px solid var(--c-ink-900);
            padding-bottom: 0.5rem;
        }

        .preview-teams {
            display: grid;
            gap: 0.5rem;
        }

        .preview-team {
            padding: 0.75rem;
            border-radius: 8px;
            border: 2px solid var(--c-ink-900);
            box-shadow: 2px 2px 0 var(--c-ink-900);
        }

        /* Modal d'√©dition des √©quipes */
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }

        .modal-content {
            background: var(--parchment);
            border-radius: 24px;
            padding: 2rem;
            max-width: 1200px;
            width: 95%;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
            border: 4px solid var(--wood);
            position: relative;
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2rem;
            border-bottom: 2px solid var(--c-ink-900);
            padding-bottom: 1rem;
        }

        .modal-header h2 {
            margin: 0;
            color: var(--c-ink-900);
            font-family: 'Patrick Hand', cursive;
        }

        .close-btn {
            background: #F44336;
            color: white;
            border: none;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            font-size: 1.2rem;
            cursor: pointer;
            transition: all 0.2s;
        }

        .close-btn:hover {
            background: #d32f2f;
            transform: scale(1.1);
        }

        .modal-body {
            margin-bottom: 2rem;
        }

        /* Onglets */
        .tabs {
            display: flex;
            gap: 0.5rem;
            margin-bottom: 2rem;
            border-bottom: 2px solid var(--c-ink-900);
        }

        .tab-btn {
            background: var(--c-wood-200);
            border: 2px solid var(--c-ink-900);
            border-bottom: none;
            padding: 0.75rem 1.5rem;
            border-radius: var(--r-md) var(--r-md) 0 0;
            cursor: pointer;
            font-family: 'Patrick Hand', cursive;
            font-size: 1.1rem;
            font-weight: 600;
            transition: all 0.2s;
        }

        .tab-btn:hover {
            background: var(--c-orange-500);
            color: white;
        }

        .tab-btn.active {
            background: var(--c-orange-600);
            color: white;
        }

        .tab-content {
            display: none;
            padding: 1rem 0;
        }

        .tab-content.active {
            display: block;
        }

        /* Section d'√©dition des √©quipes */
        .team-editor-section {
            margin-bottom: 2rem;
        }

        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
            padding-bottom: 0.5rem;
            border-bottom: 1px solid var(--c-ink-900);
        }

        .section-header h3 {
            margin: 0;
            color: var(--c-ink-900);
            font-family: 'Patrick Hand', cursive;
        }

        .teams-editor {
            display: grid;
            gap: 1.5rem;
        }

        .team-editor-item {
            background: white;
            border: 2px solid var(--c-ink-900);
            border-radius: var(--r-md);
            padding: 1.5rem;
            box-shadow: 4px 4px 0 var(--c-ink-900);
        }

        .team-editor-header {
            display: flex;
            gap: 1rem;
            align-items: center;
            margin-bottom: 1rem;
            flex-wrap: wrap;
        }

        .team-name-input {
            flex: 1;
            min-width: 200px;
            padding: 0.75rem;
            border: 2px solid var(--c-ink-900);
            border-radius: var(--r-sm);
            font-size: 1rem;
            font-weight: bold;
        }

        .team-color-input {
            width: 60px;
            height: 40px;
            border: 2px solid var(--c-ink-900);
            border-radius: var(--r-sm);
            cursor: pointer;
        }

        .team-members-editor label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: bold;
            color: var(--c-ink-900);
        }

        .team-members-editor textarea {
            width: 100%;
            padding: 0.75rem;
            border: 2px solid var(--c-ink-900);
            border-radius: var(--r-sm);
            font-size: 0.9rem;
            font-family: 'Nunito', sans-serif;
            resize: vertical;
        }

        .modal-footer {
            display: flex;
            gap: 1rem;
            justify-content: flex-end;
            padding-top: 1rem;
            border-top: 2px solid var(--c-ink-900);
        }

        /* Am√©liorations UI */
        .admin-section {
            margin: 1.5rem 0;
        }

        .admin-controls {
            display: flex;
            gap: 0.75rem;
            margin-bottom: 1.5rem;
            flex-wrap: wrap;
            justify-content: flex-start;
        }

        .admin-controls .fey-btn {
            min-width: 140px;
            font-size: 0.9rem;
            padding: 0.75rem 1rem;
        }

        .fey-card-header {
            font-size: 1.4rem;
            margin-bottom: 1.5rem;
            padding-bottom: 0.75rem;
            border-bottom: 3px solid var(--c-ink-900);
        }

        .trip-item {
            transition: all 0.3s ease;
            margin-bottom: 1rem;
        }

        .trip-item:hover {
            transform: translateY(-2px);
            box-shadow: 6px 8px 0 var(--c-ink-900);
        }

        .trip-actions {
            display: flex;
            gap: 0.75rem;
            align-items: center;
            flex-wrap: wrap;
        }

        .trip-actions .fey-btn-small {
            min-width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        /* Am√©lioration des modals */
        .modal-content {
            max-width: 1000px;
            width: 95%;
        }

        .modal-body {
            max-height: 70vh;
            overflow-y: auto;
        }

        .form-grid {
            gap: 1.5rem;
        }

        .form-group input, .form-group textarea, .form-group select {
            transition: all 0.2s ease;
        }

        .form-group input:focus, .form-group textarea:focus, .form-group select:focus {
            transform: translateY(-1px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }

        /* Responsive */
        @media (max-width: 768px) {
            .teams-preview-grid {
                grid-template-columns: 1fr;
            }
            
            .preview-grid {
                grid-template-columns: 1fr;
                gap: 1rem;
            }
            
            .modal-content {
                width: 98%;
                padding: 1rem;
                max-height: 95vh;
            }
            
            .team-editor-header {
                flex-direction: column;
                align-items: stretch;
            }
            
            .team-name-input {
                min-width: auto;
            }

            .form-grid {
                grid-template-columns: 1fr;
                gap: 1rem;
            }

            .admin-controls {
                justify-content: center;
            }

            .admin-controls .fey-btn {
                flex: 1;
                min-width: auto;
            }

            .trip-item {
                flex-direction: column;
                align-items: stretch;
            }

            .trip-actions {
                justify-content: center;
                margin-top: 1rem;
                padding-top: 1rem;
                border-top: 2px solid #eee;
            }
        }

        @media (max-width: 480px) {
            .fey-card {
                margin-bottom: 1rem;
                padding: 1rem;
            }

            .fey-card-header {
                font-size: 1.2rem;
            }

            .admin-controls {
                flex-direction: column;
            }

            .trip-actions {
                flex-direction: column;
                gap: 0.5rem;
            }

            .trip-actions .fey-btn-small {
                width: 100%;
                min-width: auto;
            }
        }
    </style>
</body>
</html>
